<!DOCTYPE html>
<html>

<script id = "vertex-shader-off" type='x-shader/x-vertex'>

attribute  vec4 vPosition;
uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projection;
varying vec4 vPos;
void main()
{
    vPos =   viewMatrix * modelMatrix  * vPosition;
    gl_Position = projection * vPos;
    gl_PointSize = 10.0;
}

</script>

<script id="fragment-shader-off" type="x-shader/x-fragment">

precision mediump float;
uniform vec4 uColor;


void
main()
{

     gl_FragColor = uColor;
}
</script>


<script id="vertex-shader-tex" type="x-shader/x-vertex">
attribute  vec4 vPosition;
attribute  vec3 vNormal;
uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projection;
attribute vec2 aTexCoord;
uniform vec4 uEyePosition;
uniform float uFlagCubeTex;
varying vec2 vTexCoord;
varying vec3 vCubeTexCoord;

void main()
{

    if (uFlagCubeTex > 0.0) {
        vCubeTexCoord  = (modelMatrix*vPosition - uEyePosition).xyz;
        gl_Position = (projection * viewMatrix * modelMatrix  * vPosition).xyww;


    }

    else {
        gl_Position = projection * viewMatrix * modelMatrix  * vPosition;

        vTexCoord = aTexCoord;
    }




}


</script>


<script id="fragment-shader-tex" type="x-shader/x-fragment">

precision highp float;

uniform float uFlagMonoColor;

uniform vec4 uColor;

uniform float uFlagCubeTex;
uniform samplerCube uCubeSampler;
uniform sampler2D u_Sampler;
varying vec2 vTexCoord;
varying vec3 vCubeTexCoord;
void
main()
{


    if (uFlagMonoColor > 0.0) {
         gl_FragColor = uColor;
    }
    else if (uFlagCubeTex > 0.0) {

        gl_FragColor = textureCube(uCubeSampler, vCubeTexCoord);
    }
    else {
        gl_FragColor = texture2D(u_Sampler, vTexCoord);
    }

}

</script>


<script id="vertex-shader-reflect" type="x-shader/x-vertex">
attribute  vec4 vPosition;
attribute  vec3 vNormal;
uniform mat3 normalMatrix;
uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projection;
uniform vec4 uEyePosition;
varying vec3 R;



void main()
{

    vec4 pos = modelMatrix * vPosition;
    vec3 N = normalize ( normalMatrix * vNormal ) ;
    vec3 E = normalize( (uEyePosition - pos).xyz );
    R = reflect(-E,N);
    gl_Position = projection * viewMatrix * pos;
}


</script>

<script id="fragment-shader-reflect" type="x-shader/x-fragment">

precision highp float;
varying vec3 R;

uniform samplerCube uCubeSampler;

void
main()
{
   gl_FragColor = textureCube(uCubeSampler, R);
}


</script>


<script type="text/javascript" src="./Common/webgl-utils.js"></script>
<script type="text/javascript" src="./Common/initShaders.js"></script>
<script type="text/javascript" src="./Common/MV.js"></script>
<script type="text/javascript" src="./entityNode.js"></script>
<script type="text/javascript" src="./model.js"></script>
<script type="text/javascript" src="./cad.js"></script>
<script type="text/javascript" src="./viewController.js"></script>



<style>
.clear{clear: both}
</style>

<body>




<div >

    <div class = "canvas"  >



        <canvas id ="hud" width="1280" height="900" style = "position: absolute; z-index: 0"> </canvas>

        <canvas id="gl-canvas" width="1440" height="900" style = "position: absolute; z-index: 1">
            Oops ... your browser doesn't support the HTML5 canvas element
        </canvas>

    </div>




    <div    style="position: relative; z-index: 2; width: 200px; ">




        <div >
            <button id = "translate" > translate </button>
            <button id = "rotate"> rotate </button>
            <button id = "scale"> scale </button>
        </div>

       <!-- <br/>
          <div >

              Position:
              <br/>
              x<input id = "positonx" type="range"
                       min = "-20" max = "20" step = '0.1' value = '0' >  <b id = "tx"> 0 </b>  </input>

              <br/>
              y <input id = "positony" type="range"
                       min = "-20" max = "20" step = '0.1' value = '0' >  <b id = "ty"> 0 </b>  </input>

              <br/>
              z <input id = "positonz" type="range"
                       min = "-20" max = "20" step = '0.1' value = '0' >  <b id = "tz"> 0 </b>  </input>



              <br/><br/>Orientation(Euler angles):

              <br/>head <input id = "head" type="range"
                          min = "-180" max = "180" step = '1' value = '0' >  <b id = "ry"> 0 </b>  </input>

              <br/>pitch <input id = "pitch" type="range"
                           min = "-90" max = "90" step = '1' value = '0' >  <b id = "rz"> 0 </b>  </input>

              <br/>bank  <input id = "bank" type="range"
                           min = "-180" max = "180" step = '1' value = '0' >  <b id = "rx"> 0 </b>  </input>



              <br/><br/>Scale:
              <br/>scale x <input id = "scalex" type="range"
                             min = "0.1" max = "20" step = '0.1' value = '5' >  <b id = "sx"> 5 </b>  </input>

              <br/>scale y <input id = "scaley" type="range"
                             min = "0.1" max = "20" step = '0.1' value = '5' >  <b id = "sy"> 5 </b>  </input>

              <br/>scale z  <input id = "scalez" type="range"
                              min = "0.1" max = "20" step = '0.1' value = '5' >  <b id = "sz"> 5 </b>  </input>

          </div>-->

    </div>




    <div style="position: relative; z-index: 2; width: 200px; color:#3bff40">


        <div style="color: coral">
            <br/>    rotate: mouse left
            <br/>zoom:  mouse wheel
            <br/>pan: mouse right
            <br>
            left click
            to focus object

        </div>


    </div>

</div>

<div class="clear"></div>




</body>
</html>
